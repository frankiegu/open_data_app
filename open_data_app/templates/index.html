<!DOCTYPE html>
<html>
<head>
    <title>公开数据集应用平台</title>
    <!-- <link rel="stylesheet" type="text/css" href='{{url_for("static",filename="semantic.min.css")}}'> -->
    <script type="text/javascript" src='{{url_for("static",filename="jquery-3.2.1.js")}}'></script>
    <!-- <script type="text/javascript" src='{{url_for("static",filename="semantic.min.js")}}'></script> -->
    <style type="text/css">
        .interaction_area {
            position: relative;
            background-color: lightgrey;
            width: 500px;
            height: 300px;
            padding: 10px;
        }

        .result {
            display: none;
        }

        .active {
            display: inline-block;
        }

        .basic_form {
            position: relative;
        }

        .basic_form button {
            position: absolute;
            right: 1px;
        }
    </style>
</head>
<body>
<h1>公开数据集应用平台</h1>
<small>一个希望让公开数据集获得真正的幸福的网站</small>
<ul>
    <li>鸢尾花品种预测</li>
    <li>美国致富秘籍</li>
</ul>

<div class="interaction_area" id='iris'>
    <h2>鸢尾花品种预测</h2>
    <p>请填入新的花样数据</p>
    <div class="basic_form">
        <div>
            <label>萼片长度(cm)</label>
            <input type="number" name="sepal_length" value="6.1"></div>
        <div>
            <label>萼片宽度(cm)</label>
            <input type="number" name="sepal_width" value="3.0">
        </div>
        <div>
            <label>花瓣长度(cm)</label>
            <input type="number" name="petal_length" value="4.9">
        </div>
        <div>
            <label>花瓣宽度(cm)</label>
            <input type="number" name="petal_width" value="1.8">
        </div>
        <button class="predict">预测一下</button>
    </div>
    <div class="result">
        <label>预测结果为：</label>
        <p></p>
    </div>
</div>

<div class="interaction_area" id="adult">
    <h2>美国致富秘籍</h2>
    <p>请填入你的人生计划</p>
    <div class="basic_form">
        <div>
            <label>性别选择</label>
            <input type="number" name="sepal_length" value="6.1"></div>
        <div>
            <label>教育水平</label>
            <input type="number" name="sepal_width" value="3.0">
        </div>
        <div>
            <label>职业选择</label>
            <input type="number" name="petal_length" value="4.9">
        </div>
        <div>
            <label>结婚意向</label>
            <input type="number" name="petal_width" value="1.8">
        </div>
        <button class="predict">预测一下</button>
    </div>
    <div class="result">
        <label>预测结果为：</label>
        <p></p>
    </div>
</div>

<script type="text/javascript">
    $(".predict").click(function(){
        var formdata = {'data':[]}
        var form_area = $(this).parent()
        var interaction_area = $(this).parent().parent()
        var id = interaction_area.attr('id')
        form_area.find('input').each(function(){
            formdata['data'].push($(this).val())
        });
        console.info(formdata);
        $.ajax({
            url: "/api/predict/"+id,
            data:JSON.stringify(formdata),
            type: "POST",
            contentType : "application/json; charset=utf-8",
            datatype:"json",
        }).done(function(json){
            interaction_area.find('.result p').text(json[0])
            interaction_area.find('.result').addClass('active');
            }
        )
    });
</script>
</body>
</html>